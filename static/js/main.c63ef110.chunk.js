(this["webpackJsonpmanager-app"]=this["webpackJsonpmanager-app"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(14),a(8)),s=a(2),l=a(3),d=a(1),u=a(5),m=a(4),h=window.API_URL,p=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).deleteProduct=n.deleteProduct.bind(Object(d.a)(n)),n.productCard=n.productCard.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"deleteProduct",value:function(e){fetch(h+"/produtos/"+e,{method:"DELETE"}),console.log(e),window.location.reload(!1)}},{key:"productCard",value:function(e){var t=this;return r.a.createElement("div",{key:e.id,className:"card mb-2 shadow-sm"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h5",{className:"card-title"},e.descricao),r.a.createElement("h6",{className:"card-subtitle mb-1 text-muted"},e.categorias.categoria)),r.a.createElement("div",{className:"col"},r.a.createElement("button",{onClick:function(a){a.preventDefault(),t.props.openEdit(e)},className:"btn btn-default m-1",style:{float:"right"}},r.a.createElement("i",{className:"fas fa-edit mr-1"}),"Editar"),r.a.createElement("button",{onClick:function(a){a.preventDefault(),t.deleteProduct(e.id)},className:"btn btn-danger m-1",style:{float:"right"}},r.a.createElement("i",{className:"fas fa-trash mr-1"}),"Apagar")))))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card m-3 p-3 shadow-lg border-0"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"Lista de Produtos")),r.a.createElement("div",{className:"col"},r.a.createElement("h5",null,"por categoria:"),r.a.createElement("select",{className:"form-control",name:"searchByCategory",onChange:this.props.handleChange,required:!0},r.a.createElement("option",{value:""},"Todas"),this.props.categories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.categoria)}))))),this.props.searchByCategory?this.props.products.filter((function(t){return t.categorias.id===parseInt(e.props.searchByCategory)})).map(this.productCard):this.props.products.map(this.productCard))}}]),a}(r.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card m-3 p-3 shadow-lg border-0"},r.a.createElement("h2",null,"Adicionar Produto"),r.a.createElement("form",{onSubmit:this.props.addProduct},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nome do produto:"),r.a.createElement("input",{className:"form-control",type:"text",name:"product",onChange:this.props.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Categoria:"),r.a.createElement("select",{className:"form-control",name:"category",id:"categoria",onChange:this.props.handleChange,required:!0},r.a.createElement("option",{value:""}),this.props.categories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.categoria)})))),r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1"},"Adicionar")))}}]),a}(r.a.Component),E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card m-4 p-3 shadow-lg border-0"},r.a.createElement("h2",null,"Editar Produto"),r.a.createElement("form",{onSubmit:this.props.editProduct},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nome do produto:"),r.a.createElement("input",{className:"form-control",type:"text",name:"product",value:this.props.product,onChange:this.props.handleChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Categoria:"),r.a.createElement("select",{className:"form-control",name:"category",id:"categoria",onChange:this.props.handleChange,required:!0},r.a.createElement("option",{defaultValue:!0}),this.props.categories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.categoria)})))),r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1"},"Editar"),r.a.createElement("button",{onClick:this.props.closeEdit,className:"btn btn-danger m-1"},"Cancelar")))}}]),a}(r.a.Component),f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={products:[],categories:[],editing:!1,id:null,product:"",category:null,searchByCategory:""},n.openEdit=n.openEdit.bind(Object(d.a)(n)),n.closeEdit=n.closeEdit.bind(Object(d.a)(n)),n.editProduct=n.editProduct.bind(Object(d.a)(n)),n.addProduct=n.addProduct.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(i.a)({},e.target.name,e.target.value))}},{key:"editProduct",value:function(e){e.preventDefault(),console.log([this.state.product,this.state.category]),fetch(h+"/produtos/"+this.state.id,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"PUT",body:JSON.stringify({descricao:this.state.product,id_categoria:this.state.category})}),window.location.reload(!1)}},{key:"addProduct",value:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({descricao:this.state.product,id_categoria:this.state.category})};fetch(h+"/produtos/",t).then((function(e){return e.json()})),window.location.reload(!1)}},{key:"openEdit",value:function(e){this.setState({editing:!0,id:e.id,product:e.descricao,category:e.categorias.id})}},{key:"closeEdit",value:function(e){e.preventDefault(),this.setState({editing:!1})}},{key:"componentDidUpdate",value:function(e,t){console.log("Component re-rendered.")}},{key:"componentDidMount",value:function(){var e=this;fetch(h+"/produtos").then((function(e){return e.json()})).then((function(t){e.setState({products:t.products})})).catch(console.log),fetch(h+"/categorias").then((function(e){return e.json()})).then((function(t){e.setState({categories:t.categorias})})).catch(console.log)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar-expand navbar-white bg-white shadow-sm"},r.a.createElement("h1",{className:"pb-2 text-center",style:{fontFamily:"Montserrat",fontSize:45}},"Gerenciar Produtos")),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},this.state.editing?r.a.createElement(E,{product:this.state.product,editProduct:this.editProduct,closeEdit:this.closeEdit,categories:this.state.categories,handleChange:this.handleChange}):r.a.createElement(g,{categories:this.state.categories,handleChange:this.handleChange,addProduct:this.addProduct})),r.a.createElement("div",{className:"col"},r.a.createElement(p,{handleChange:this.handleChange,searchByCategory:this.state.searchByCategory,categories:this.state.categories,products:this.state.products,openEdit:this.openEdit})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.c63ef110.chunk.js.map